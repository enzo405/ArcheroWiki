<!DOCTYPE html>
<html lang="en">
	<head>
		{% load static %}
		<meta charset="UTF-8">
		<link rel="stylesheet" type="text/css" href="{% static 'wiki.css' %}?version=1.13.4 %}">
		<link rel="stylesheet" type="text/css" href="{% static 'sidebar.css' %}?version=1.13.4 %}">
		<link rel="stylesheet" type="text/css" href="{% static 'footer.css' %}?version=1.13.4 %}">
		<link rel="shortcut icon" type="image/png" href="{% static 'favicon.ico' %}"/>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Welcome to Wiki</title>
		<script src="https://kit.fontawesome.com/0b193e89de.js" crossorigin="anonymous"></script>
	</head>
{% if darkmode == "yes" %}
<body class="body_dark_mode">
{% elif darkmode == "no" %}
<body>
{% endif %}
	<div class="main-container">
		<div class="sidebar" id="sidebar">
			<div class="sidebar-icon" id="sidebar-icon">
				<div class="leftsidebarc" id="lscimg"> <div class="lcontent">SIDEBAR</div></div>
				<div class="rightsidebarc" id="rscimg">
					<svg id="svg-filter-sidebar"width="100%" height="100%" version="1.1" viewBox="0 0 20 20" x="0px" y="0px" class="ScIconSVG-sc-1q25cff-1 dSicFr"><g><path d="M4 16V4H2v12h2zM13 15l-1.5-1.5L14 11H6V9h8l-2.5-2.5L13 5l5 5-5 5z"></path></g></svg>
				</div>
			</div>
			<div class="traveling" id="traveling">
				<!-- SIDEBAR CONTENT INJECTED BY JAVASCRIPT -->
			</div>
		</div>
		<main class="main-menu cmcath">
			<header class="header-container">
				<div class="header-container-1"></div>
				<div class="header-container-2 header_msg"><h2>{{ header_msg }}</h2></div>
				<div class="header-container-3 globe_header_icon">
					<!-- <label for="lang"><i class="fa-solid fa-globe"></i></label>
					<select name="lang" id="lang">
						{% for language in lang %}
						<option value="{{language}}">{{language}}</option>
						{% endfor %}
					</select> -->
				</div>
			</header>
			<div class="container_runes_input">
				<div class="runes-choice">
					<div onclick="runesClicked('power')" class="rchrch power"><img src="/static/image/wiki-image/rune_101.png"></div>
					<div class="rchrch saviour"><img src="/static/image/wiki-image/rune_102.png"></div>
					<div class="rchrch recovery"><img src="/static/image/wiki-image/rune_103.png"></div>
					<div onclick="runesClicked('courage')" class="rchrch courage"><img src="/static/image/wiki-image/rune_104.png"></div>
					<div class="rchrch luck"><img src="/static/image/wiki-image/rune_105.png"></div>
				</div>
				<div class="runes_input">
					<div class="select-runes">
						<select id="firstSelect" class="runes-line">
							<option id="firstOption" value="none">--Choose a Runes--</option>
						</select>
						<select id="secondSelect" class="runes-line">
							<option id="firstOption" value="none"></option>
						</select>
						<select id="thirdSelect" class="runes-line">
							<option id="firstOption" value="none"></option>
						</select>
						<select id="fourthSelect" class="runes-line">
							<option id="firstOption" value="none"></option>
						</select>
						<select id="fifthSelect" class="runes-line">
							<option id="firstOption" value="none"></option>
						</select>
					</div>
					<div class="input-runes">
						<input id="firstInput" type="text" pattern="^[0-9]{1,3}([.][0-9]{1,2})?$">
						<input id="secondInput" type="text" pattern="^[0-9]{1,3}([.][0-9]{1,2})?$">
						<input id="thirdInput" type="text" pattern="^[0-9]{1,3}([.][0-9]{1,2})?$">
						<input id="fourthInput" type="text" pattern="^[0-9]{1,3}([.][0-9]{1,2})?$">
						<input id="fifthInput" type="text" pattern="^[0-9]{1,3}([.][0-9]{1,2})?$">
					</div>
				</div>
			</div>
			<div class="ingame_damage_result" id="ingame_damage_result">
				<div class="btn-generate-damage" onclick="generateDamage()">Generate Damage</div>
				<div class="btn-generate-damage" onclick="generateDamageWithEggBonus()">+5% Damage on Mobs</div>
				<table class="table-damage-result">
					<tr>
						<th colspan="1" class="table-outrow popup" onclick="damagePopupFunction()"><i class="fa fa-info-circle" aria-hidden="true"></i></th>
							<div class="popup_container" id="damage_popup">
								• The damage shown are with your actual runes<br>
								• Generate Damage show the damage with the runes input above<br> 
								• '+5% Damage On Mobs' add the 5% damage that reffers to the passiv egg stats
							</div>
						<th colspan="2" class="distance-type-th">Melee</th>
						<th colspan="2" class="distance-type-th">Range</th>
					</tr>
					<tr>
						<th class="table-outrow"></th>
						<th class="damage-type-th">Normal Dmg</th>
						<th class="damage-type-th">Critical Dmg</th>
						<th class="damage-type-th">Normal Dmg</th>
						<th class="damage-type-th">Critical Dmg</th>
					</tr>
					<tr>
						<td class="mobs-type-td">Ground Mobs</td>
						<td class="td-value-damage" id="damageMeleeNormalGroundM"></td>
						<td class="td-value-damage" id="damageMeleeCriticGroundM"></td>
						<td class="td-value-damage" id="damageRangeNormalGroundM"></td>
						<td class="td-value-damage" id="damageRangeCriticGroundM"></td>
					</tr>
					<tr>
						<td class="mobs-type-td">Airborne Mobs</td>
						<td class="td-value-damage" id="damageMeleeNormalAirborneM"></td>
						<td class="td-value-damage" id="damageMeleeCriticAirborneM"></td>
						<td class="td-value-damage" id="damageRangeNormalAirborneM"></td>
						<td class="td-value-damage" id="damageRangeCriticAirborneM"></td>
					</tr>
					<tr>
						<td class="mobs-type-td">Ground Boss</td>
						<td class="td-value-damage" id="damageMeleeNormalGroundB"></td>
						<td class="td-value-damage" id="damageMeleeCriticGroundB"></td>
						<td class="td-value-damage" id="damageRangeNormalGroundB"></td>
						<td class="td-value-damage" id="damageRangeCriticGroundB"></td>
					</tr>
					<tr>
						<td class="mobs-type-td">Airborne Boss</td>
						<td class="td-value-damage" id="damageMeleeNormalAirborneB"></td>
						<td class="td-value-damage" id="damageMeleeCriticAirborneB"></td>
						<td class="td-value-damage" id="damageRangeNormalAirborneB"></td>
						<td class="td-value-damage" id="damageRangeCriticAirborneB"></td>
					</tr>
				</table><br>
				<div class="averageDamage">Your average Damage is : <b id="averageDamage"></b></div>
			</div>
		</main>
	</div>
	<footer class="footer-margin">
		<div class="footer-content">
			<div class="footer-about">
				<img class="footer-img-icon" src="/static/image/archero_icon.png">
				<div class="about-content">
					<h2>Archero :</h2>
					<div>Archero Update will be added with a certains delay</div>
					<div class="contact-me">
						<div>If you encounter any bugs / anomaly please contact me on discord</div>
						<div><b><a class="me-discord-link" href="https://discord.com/users/382930544385851392" target="_blank"><i class="fa-brands fa-discord"></i> LuhCaran#9802</a></b></div>
					</div>
				</div>
			</div>
			<div class="discord_link">
				<div class="container_dlink">
					<h2>Community Link:</h2> 
					<a href="https://discord.gg/d7w6FxhHjj" target="_blank"><li> LeMuthique's Server</li></a>
					<a href="https://discord.gg/eAqZquTF6X" target="_blank"><li> TigerShark's Server</li></a>
				</div>
				<div class="container_rlink">
					<a href="https://www.reddit.com/r/Archero/" target="_blank"><li> r/Archero</li></a>
				</div>
				<div class="container_flink">
					<a href="https://www.facebook.com/archerogame/" target="_blank"><li> Fb Archero</li></a>
				</div>
			</div>
			<div class="thanks">
				<h2>Shout-out :</h2>
				<div class="shout-out">SonHaon, Ktaplouf, Pew, Deth</div>
				<div class="shout-out">Lovii, Kaseiya, Lorenz, TigerShark14</div>
				<div class="shout-out">Everyone who helped me getting data</div>
			</div>
		</div>
	</footer>
</body>
<script type="module">
	import sidebar from "/static/json/sidebar.json" assert {type: 'json'};

	const traveling = document.getElementById("traveling")

	for(const item of sidebar["sidebar"]){
		const parentContainer = document.createElement("div")
		const leftSidebar = document.createElement("div")
		const childLeftSidebar = document.createElement("div")
		const rightSidebar = document.createElement("div")
		const childRightSidebar = document.createElement("a")
		const svg = document.createElement("object")

		traveling.appendChild(parentContainer)
		parentContainer.appendChild(leftSidebar)
		parentContainer.appendChild(rightSidebar)
		leftSidebar.appendChild(childLeftSidebar)
		rightSidebar.appendChild(childRightSidebar)
		childRightSidebar.appendChild(svg)

		parentContainer.className = item['container']['class']
		parentContainer.addEventListener('click', function windowHref(){
			window.location.href = item['container']['onclick']
		})
		leftSidebar.className = item['container']['childs_container']['leftsidebar']['self_class']
		childLeftSidebar.className = item['container']['childs_container']['leftsidebar']['child_class']
		childLeftSidebar.innerHTML = item['container']['childs_container']['leftsidebar']['child_content']
		rightSidebar.className = item['container']['childs_container']['rightsidebar']['self_class']
		childRightSidebar.className = item['container']['childs_container']['rightsidebar']['child_class']
		svg.type = item['container']['childs_container']['rightsidebar']['child_content']['object_type']
		svg.id = item['container']['childs_container']['rightsidebar']['child_content']['object_id']
		svg.data = item['container']['childs_container']['rightsidebar']['child_content']['object_data']
		svg.width = item['container']['childs_container']['rightsidebar']['child_content']['object_width']
		svg.height = item['container']['childs_container']['rightsidebar']['child_content']['object_height']
	}

	const themeParentContainer = document.createElement("div")
	const themeLeftSidebar = document.createElement("div")
	const themeChildLeftSidebar = document.createElement("div")
	const themeRightSidebar = document.createElement("div")
	const themeSvg = document.createElement("object")

	traveling.appendChild(themeParentContainer)
	themeParentContainer.appendChild(themeLeftSidebar)
	themeParentContainer.appendChild(themeRightSidebar)
	themeLeftSidebar.appendChild(themeChildLeftSidebar)
	themeRightSidebar.appendChild(themeSvg)

	themeParentContainer.className = "traveling-inline-div"
	themeParentContainer.id = "switch_dark_mode"
	themeLeftSidebar.className = "leftsidebarc traveling-left"
	themeChildLeftSidebar.className = "shcl"
	themeChildLeftSidebar.innerHTML = "Theme"
	themeRightSidebar.className = "rightsidebarc traveling-right"
	themeSvg.type = "image/png"
	themeSvg.id = "darkmodeSWITCH" 
	themeSvg.width = "21"
	themeSvg.height = "21"

	var darkmode = "{{ darkmode }}"
	if(darkmode == "yes"){
		themeSvg.data = "\\static\\image\\svg\\moon.svg"
	}else if(darkmode == "no"){
		themeSvg.data = "\\static\\image\\svg\\sun.svg"
	}
	
	var switchModeBtn = document.getElementById('switch_dark_mode');
	switchModeBtn.addEventListener('click', function toggleClassDarkMode(){
		var date = new Date()
		var darkmodeSWITCH = document.getElementById('darkmodeSWITCH')
		date.setTime(date.getTime() + (365*24*60*60*1000));
		var body = document.body;
		body.classList.toggle("body_dark_mode");
		if(body.className == "body_dark_mode"){
			document.cookie = "modeDisplay=True; expires=" + date.toUTCString() + "; path=/";
			darkmodeSWITCH.setAttribute("data","\\static\\image\\svg\\moon.svg")
		}else{
			document.cookie = 'modeDisplay=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
			darkmodeSWITCH.setAttribute("data","\\static\\image\\svg\\sun.svg")
		}
	})

	var sidebarBtn = document.getElementById('sidebar-icon');
	sidebarBtn.addEventListener('click', function toggleSideBarClass(){
		var sidebar = document.getElementById("sidebar")
		sidebar.classList.toggle('sidebar-active')
	})
	
	function cookieInitialize(){
		document.cookie = "windowInnerHeight=" + window.innerHeight +  "; path=/";
		document.cookie = "windowInnerWidth=" + window.innerWidth +  "; path=/";
	}
	cookieInitialize()
</script>
<script>
	var damage_popup = document.getElementById('damage_popup')
	function damagePopupFunction(){
		damage_popup.classList.toggle('show')
	}
	window.addEventListener('click', ({target}) => {
		if(!target.closest('.popup') && damage_popup.classList.contains('show')) damagePopupFunction()
	})

	function calculationDamage(GAtype, RMtype, MBtype,speMobEgg) {
		if(GAtype == "ground"){
			var typeUnitGAF = "{{flat_dmg_vs_ground}}";
			var typeUnitGAV = "{{var_dmg_vs_ground}}";
		}else if(GAtype == "airborne"){
			var typeUnitGAF = "{{flat_dmg_vs_airborne}}";
			var typeUnitGAV = "{{var_dmg_vs_airborne}}";
		}
		if(RMtype == "melee"){
			var typeUnitRMF = "{{flat_dmg_vs_melee}}";
			var typeUnitRMV = "{{var_dmg_vs_melee}}";
		}else if(RMtype == "range"){
			var typeUnitRMF = "{{flat_dmg_vs_range}}";
			var typeUnitRMV = "{{var_dmg_vs_range}}";
		}
		if(MBtype == "mobs"){
			var typeUnitMBF = "{{flat_dmg_vs_mobs}}";
			var typeUnitMBV = "{{var_dmg_vs_mobs}}";
		}else if(MBtype == "boss"){
			var typeUnitMBF = "{{flat_dmg_vs_boss}}";
			var typeUnitMBV = "{{var_dmg_vs_boss}}";
		}
		var HeroFlat = parseInt(eval("{{paramDmgTable}}")[0]) + parseInt(typeUnitGAF) + parseInt(typeUnitMBF) + parseInt(typeUnitRMF) + parseInt("{{flat_dmg_all}}")
		var GaMrVar = parseFloat(typeUnitRMV/100) + parseFloat(typeUnitGAV/100) + parseFloat(1)
		var MBvar = parseFloat(typeUnitMBV/100) + parseFloat(1)
		var allDMGvar = parseFloat("{{var_dmg_all}}"/100) + parseFloat(1)
		var weaponDmgMult = parseFloat("{{weapon_coeff}}")
		if(speMobEgg == 0){
			var dmgResult = HeroFlat * GaMrVar * MBvar * allDMGvar * weaponDmgMult
		}else if(speMobEgg == 5){
			var dmgResult = HeroFlat * GaMrVar * MBvar * allDMGvar * weaponDmgMult * 1.05
		}
		return Math.round(dmgResult)
	}

	var damageMeleeNormalGroundM = document.getElementById('damageMeleeNormalGroundM')
	var damageMeleeCriticGroundM = document.getElementById('damageMeleeCriticGroundM')
	var damageMeleeNormalGroundB = document.getElementById('damageMeleeNormalGroundB')
	var damageMeleeCriticGroundB = document.getElementById('damageMeleeCriticGroundB')
	var damageMeleeNormalAirborneM = document.getElementById('damageMeleeNormalAirborneM')
	var damageMeleeCriticAirborneM = document.getElementById('damageMeleeCriticAirborneM')
	var damageMeleeNormalAirborneB = document.getElementById('damageMeleeNormalAirborneB')
	var damageMeleeCriticAirborneB = document.getElementById('damageMeleeCriticAirborneB')
	var damageRangeNormalGroundM = document.getElementById('damageRangeNormalGroundM')
	var damageRangeCriticGroundM = document.getElementById('damageRangeCriticGroundM')
	var damageRangeNormalGroundB = document.getElementById('damageRangeNormalGroundB')
	var damageRangeCriticGroundB = document.getElementById('damageRangeCriticGroundB')
	var damageRangeNormalAirborneM = document.getElementById('damageRangeNormalAirborneM')
	var damageRangeCriticAirborneM = document.getElementById('damageRangeCriticAirborneM')
	var damageRangeNormalAirborneB = document.getElementById('damageRangeNormalAirborneB')
	var damageRangeCriticAirborneB = document.getElementById('damageRangeCriticAirborneB')
	var averageDamageContainer = document.getElementById('averageDamage');

	damageMeleeNormalGroundM.innerHTML = calculationDamage("ground","melee","mobs",0);
	damageMeleeCriticGroundM.innerHTML = Math.round(parseInt(damageMeleeNormalGroundM.innerHTML) * (parseFloat("{{ crit_dmg }}")/100));
	damageMeleeNormalGroundB.innerHTML = calculationDamage("ground","melee","boss",0);;
	damageMeleeCriticGroundB.innerHTML = Math.round(parseInt(damageMeleeNormalGroundB.innerHTML) * (parseFloat("{{ crit_dmg }}")/100));
	damageMeleeNormalAirborneM.innerHTML = calculationDamage("airborne","melee","mobs",0);;
	damageMeleeCriticAirborneM.innerHTML = Math.round(parseInt(damageMeleeNormalAirborneM.innerHTML) * (parseFloat("{{ crit_dmg }}")/100));
	damageMeleeNormalAirborneB.innerHTML = calculationDamage("airborne","melee","boss",0);;
	damageMeleeCriticAirborneB.innerHTML = Math.round(parseInt(damageMeleeNormalAirborneB.innerHTML) * (parseFloat("{{ crit_dmg }}")/100));
	damageRangeNormalGroundM.innerHTML = calculationDamage("ground","range","mobs",0);;
	damageRangeCriticGroundM.innerHTML = Math.round(parseInt(damageRangeNormalGroundM.innerHTML) * (parseFloat("{{ crit_dmg }}")/100));
	damageRangeNormalGroundB.innerHTML = calculationDamage("ground","range","boss",0);;
	damageRangeCriticGroundB.innerHTML = Math.round(parseInt(damageRangeNormalGroundB.innerHTML) * (parseFloat("{{ crit_dmg }}")/100));
	damageRangeNormalAirborneM.innerHTML = calculationDamage("airborne","range","mobs",0);;
	damageRangeCriticAirborneM.innerHTML = Math.round(parseInt(damageRangeNormalAirborneM.innerHTML) * (parseFloat("{{ crit_dmg }}")/100));
	damageRangeNormalAirborneB.innerHTML = calculationDamage("airborne","range","boss",0);;
	damageRangeCriticAirborneB.innerHTML = Math.round(parseInt(damageRangeNormalAirborneB.innerHTML) * (parseFloat("{{ crit_dmg }}")/100));


	function generateDamage(){
		var listHeroStepAtk = eval("{{paramDmgTable}}")
		var inputRune = {
			'Attack (Power)':0,
			'Attack% (Power)':0,
			'Attack (Courage)':0,
			'Attack% (Courage)':0,
			'Damage To Airborne Units':0,
			'Damage To Airborne Units%':0,
			'Damage To Ground Units':0,
			'Damage To Ground Units%':0,
			'Damage To Melee Units':0,
			'Damage To Melee Units%':0,
			'Damage To Ranged Units':0,
			'Damage To Ranged Units%':0,
			'Damage To Bosses':0,
			'Damage To Bosses%':0,
			'Damage To Mobs':0,
			'Damage To Mobs%':0,
			'All Damage Increased':0,
			'All Damage Increased%':0,
			'Attack Speed':0,
			'Crit Chance':0,
			'Crit Damage':0,
			'Level-Up to increase Damage in Battle':0,
			'none':0,
			"hero attack courage flat":0,
			"hero attack courage var":0,

			[document.getElementById('firstSelect').value]:document.getElementById('firstInput').value,
			[document.getElementById('secondSelect').value]: document.getElementById('secondInput').value,
			[document.getElementById('thirdSelect').value]: document.getElementById('thirdInput').value,
			[document.getElementById('fourthSelect').value]: document.getElementById('fourthInput').value,
			[document.getElementById('fifthSelect').value]: document.getElementById('fifthInput').value,
		}
		var coeff1_atk = parseFloat(inputRune['Attack% (Courage)'])/100 + parseFloat(inputRune['Attack% (Power)'])/100 + parseFloat(listHeroStepAtk[2])/100
		var cumul_all_bonus_passif_atk = listHeroStepAtk[1] + parseInt(inputRune['Attack (Courage)']) + parseInt(inputRune['Attack (Power)'])
		var hero_base_modified_stats_atk = (parseInt(listHeroStepAtk[3]) - parseInt(inputRune['hero attack courage flat'])) * (inputRune['hero attack courage var'] + parseFloat(listHeroStepAtk[4]) + 1) + parseInt(inputRune['hero attack courage flat'])
		var global_stats_atk_flat = parseInt(Math.floor(hero_base_modified_stats_atk)) + parseInt(cumul_all_bonus_passif_atk) + parseInt(listHeroStepAtk[5])
		var hero_atk = global_stats_atk_flat + (global_stats_atk_flat*parseFloat(coeff1_atk)) + (global_stats_atk_flat*parseFloat(listHeroStepAtk[6])) + (global_stats_atk_flat*parseFloat(listHeroStepAtk[7])) + listHeroStepAtk[8] + listHeroStepAtk[9]
		var weapon_coeff = parseFloat("{{weapon_coeff}}")
		var crit_dmg = (200 + parseFloat(inputRune['Crit Damage']))

		var airborne_dmg_flat = inputRune['Damage To Airborne Units'] + parseInt("{{ flat_dmg_vs_airborne }}");
		var airborne_dmg_var = inputRune['Damage To Airborne Units%'] + parseInt("{{ var_dmg_vs_airborne }}");
		var ground_dmg_flat = inputRune['Damage To Ground Units'] + parseInt("{{ flat_dmg_vs_ground }}");
		var ground_dmg_var = inputRune['Damage To Ground Units%'] + parseInt("{{ var_dmg_vs_ground }}");
		var melee_dmg_flat = inputRune['Damage To Melee Units'] + parseInt("{{ flat_dmg_vs_melee }}");
		var melee_dmg_var = inputRune['Damage To Melee Units%'] + parseInt("{{ var_dmg_vs_melee }}");
		var ranged_dmg_flat = inputRune['Damage To Ranged Units'] + parseInt("{{ flat_dmg_vs_range }}");
		var ranged_dmg_var = inputRune['Damage To Ranged Units%'] + parseInt("{{ var_dmg_vs_range }}");
		var bosses_dmg_flat = inputRune['Damage To Bosses'] + parseInt("{{ flat_dmg_vs_boss }}");
		var bosses_dmg_var = inputRune['Damage To Bosses%'] + parseInt("{{ var_dmg_vs_boss }}");
		var mobs_dmg_flat = inputRune['Damage To Mobs'] + parseInt("{{ flat_dmg_vs_mobs }}");
		var mobs_dmg_var = inputRune['Damage To Mobs%'] + parseInt("{{ var_dmg_vs_mobs }}");
		var all_dmg_flat = inputRune['All Damage Increased'] + parseInt("{{ flat_dmg_all }}");
		var all_dmg_var = inputRune['All Damage Increased%'];
		
		damageMeleeNormalGroundM.innerHTML = Math.round((parseInt(hero_atk) + parseInt(ground_dmg_flat) + parseInt(mobs_dmg_flat) + parseInt(melee_dmg_flat) + parseInt(all_dmg_flat))*(parseFloat(melee_dmg_var/100) + parseFloat(ground_dmg_var/100) + parseFloat(1))*(parseFloat(mobs_dmg_var/100) + parseFloat(1))*(parseFloat(all_dmg_var/100) + parseFloat(1))*(parseFloat(weapon_coeff)))
		damageMeleeCriticGroundM.innerHTML = Math.round(parseInt(damageMeleeNormalGroundM.innerHTML) * (crit_dmg/100))
		damageMeleeNormalGroundB.innerHTML = Math.round((parseInt(hero_atk) + parseInt(ground_dmg_flat) + parseInt(bosses_dmg_flat) + parseInt(melee_dmg_flat) + parseInt(all_dmg_flat))*(parseFloat(melee_dmg_var/100) + parseFloat(ground_dmg_var/100) + parseFloat(1))*(parseFloat(bosses_dmg_var/100) + parseFloat(1))*(parseFloat(all_dmg_var/100) + parseFloat(1))*(parseFloat(weapon_coeff)))
		damageMeleeCriticGroundB.innerHTML = Math.round(parseInt(damageMeleeNormalGroundB.innerHTML) * (crit_dmg/100))
		damageMeleeNormalAirborneM.innerHTML = Math.round((parseInt(hero_atk) + parseInt(airborne_dmg_flat) + parseInt(mobs_dmg_flat) + parseInt(melee_dmg_flat) + parseInt(all_dmg_flat))*(parseFloat(melee_dmg_var/100) + parseFloat(airborne_dmg_var/100) + parseFloat(1))*(parseFloat(mobs_dmg_var/100) + parseFloat(1))*(parseFloat(all_dmg_var/100) + parseFloat(1))*(parseFloat(weapon_coeff)))
		damageMeleeCriticAirborneM.innerHTML = Math.round(parseInt(damageMeleeNormalAirborneM.innerHTML) * (crit_dmg/100))
		damageMeleeNormalAirborneB.innerHTML = Math.round((parseInt(hero_atk) + parseInt(airborne_dmg_flat) + parseInt(bosses_dmg_flat) + parseInt(melee_dmg_flat) + parseInt(all_dmg_flat))*(parseFloat(melee_dmg_var/100) + parseFloat(airborne_dmg_var/100) + parseFloat(1))*(parseFloat(bosses_dmg_var/100) + parseFloat(1))*(parseFloat(all_dmg_var/100) + parseFloat(1))*(parseFloat(weapon_coeff)))
		damageMeleeCriticAirborneB.innerHTML = Math.round(parseInt(damageMeleeNormalAirborneB.innerHTML) * (crit_dmg/100))
		damageRangeNormalGroundM.innerHTML = Math.round((parseInt(hero_atk) + parseInt(ground_dmg_flat) + parseInt(mobs_dmg_flat) + parseInt(ranged_dmg_flat) + parseInt(all_dmg_flat))*(parseFloat(ranged_dmg_var/100) + parseFloat(ground_dmg_var/100) + parseFloat(1))*(parseFloat(mobs_dmg_var/100) + parseFloat(1))*(parseFloat(all_dmg_var/100) + parseFloat(1))*(parseFloat(weapon_coeff)))
		damageRangeCriticGroundM.innerHTML = Math.round(parseInt(damageRangeNormalGroundM.innerHTML) * (crit_dmg/100))
		damageRangeNormalGroundB.innerHTML = Math.round((parseInt(hero_atk) + parseInt(ground_dmg_flat) + parseInt(bosses_dmg_flat) + parseInt(ranged_dmg_flat) + parseInt(all_dmg_flat))*(parseFloat(ranged_dmg_var/100) + parseFloat(ground_dmg_var/100) + parseFloat(1))*(parseFloat(bosses_dmg_var/100) + parseFloat(1))*(parseFloat(all_dmg_var/100) + parseFloat(1))*(parseFloat(weapon_coeff)))
		damageRangeCriticGroundB.innerHTML = Math.round(parseInt(damageRangeNormalGroundB.innerHTML) * (crit_dmg/100))
		damageRangeNormalAirborneM.innerHTML = Math.round((parseInt(hero_atk) + parseInt(airborne_dmg_flat) + parseInt(mobs_dmg_flat) + parseInt(ranged_dmg_flat) + parseInt(all_dmg_flat))*(parseFloat(ranged_dmg_var/100) + parseFloat(airborne_dmg_var/100) + parseFloat(1))*(parseFloat(mobs_dmg_var/100) + parseFloat(1))*(parseFloat(all_dmg_var/100) + parseFloat(1))*(parseFloat(weapon_coeff)))
		damageRangeCriticAirborneM.innerHTML = Math.round(parseInt(damageRangeNormalAirborneM.innerHTML) * (crit_dmg/100))
		damageRangeNormalAirborneB.innerHTML = Math.round((parseInt(hero_atk) + parseInt(airborne_dmg_flat) + parseInt(bosses_dmg_flat) + parseInt(ranged_dmg_flat) + parseInt(all_dmg_flat))*(parseFloat(ranged_dmg_var/100) + parseFloat(airborne_dmg_var/100) + parseFloat(1))*(parseFloat(bosses_dmg_var/100) + parseFloat(1))*(parseFloat(all_dmg_var/100) + parseFloat(1))*(parseFloat(weapon_coeff)))
		damageRangeCriticAirborneB.innerHTML = Math.round(parseInt(damageRangeNormalAirborneB.innerHTML) * (crit_dmg/100))

		averageDamageContainer.innerHTML = Math.round((parseInt(damageMeleeNormalGroundM.innerHTML) + parseInt(damageMeleeCriticGroundM.innerHTML) + parseInt(damageMeleeNormalGroundB.innerHTML) + parseInt(damageMeleeCriticGroundB.innerHTML) + parseInt(damageMeleeNormalAirborneM.innerHTML) + parseInt(damageMeleeCriticAirborneM.innerHTML) + parseInt(damageMeleeNormalAirborneB.innerHTML) + parseInt(damageMeleeCriticAirborneB.innerHTML) + parseInt(damageRangeNormalGroundM.innerHTML) + parseInt(damageRangeCriticGroundM.innerHTML) + parseInt(damageRangeNormalGroundB.innerHTML) + parseInt(damageRangeCriticGroundB.innerHTML) + parseInt(damageRangeNormalAirborneM.innerHTML) + parseInt(damageRangeCriticAirborneM.innerHTML) + parseInt(damageRangeNormalAirborneB.innerHTML) + parseInt(damageRangeCriticAirborneB.innerHTML))/16)
	}
	
	averageDamageContainer.innerHTML = Math.round((parseInt(damageMeleeNormalGroundM.innerHTML) + parseInt(damageMeleeCriticGroundM.innerHTML) + parseInt(damageMeleeNormalGroundB.innerHTML) + parseInt(damageMeleeCriticGroundB.innerHTML) + parseInt(damageMeleeNormalAirborneM.innerHTML) + parseInt(damageMeleeCriticAirborneM.innerHTML) + parseInt(damageMeleeNormalAirborneB.innerHTML) + parseInt(damageMeleeCriticAirborneB.innerHTML) + parseInt(damageRangeNormalGroundM.innerHTML) + parseInt(damageRangeCriticGroundM.innerHTML) + parseInt(damageRangeNormalGroundB.innerHTML) + parseInt(damageRangeCriticGroundB.innerHTML) + parseInt(damageRangeNormalAirborneM.innerHTML) + parseInt(damageRangeCriticAirborneM.innerHTML) + parseInt(damageRangeNormalAirborneB.innerHTML) + parseInt(damageRangeCriticAirborneB.innerHTML))/16)


	function generateDamageWithEggBonus() {
		var damageMeleeNormalGroundM = document.getElementById('damageMeleeNormalGroundM')
		var damageMeleeCriticGroundM = document.getElementById('damageMeleeCriticGroundM')
		var damageMeleeNormalGroundB = document.getElementById('damageMeleeNormalGroundB')
		var damageMeleeCriticGroundB = document.getElementById('damageMeleeCriticGroundB')
		var damageMeleeNormalAirborneM = document.getElementById('damageMeleeNormalAirborneM')
		var damageMeleeCriticAirborneM = document.getElementById('damageMeleeCriticAirborneM')
		var damageMeleeNormalAirborneB = document.getElementById('damageMeleeNormalAirborneB')
		var damageMeleeCriticAirborneB = document.getElementById('damageMeleeCriticAirborneB')
		var damageRangeNormalGroundM = document.getElementById('damageRangeNormalGroundM')
		var damageRangeCriticGroundM = document.getElementById('damageRangeCriticGroundM')
		var damageRangeNormalGroundB = document.getElementById('damageRangeNormalGroundB')
		var damageRangeCriticGroundB = document.getElementById('damageRangeCriticGroundB')
		var damageRangeNormalAirborneM = document.getElementById('damageRangeNormalAirborneM')
		var damageRangeCriticAirborneM = document.getElementById('damageRangeCriticAirborneM')
		var damageRangeNormalAirborneB = document.getElementById('damageRangeNormalAirborneB')
		var damageRangeCriticAirborneB = document.getElementById('damageRangeCriticAirborneB')

		if(damageMeleeNormalGroundM.innerHTML != calculationDamage("ground","melee","mobs",0)){
			damageMeleeNormalGroundM.innerHTML = calculationDamage("ground","melee","mobs",0);
			damageMeleeCriticGroundM.innerHTML = Math.round(parseInt(damageMeleeNormalGroundM.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
			damageMeleeNormalGroundB.innerHTML = calculationDamage("ground","melee","boss",0);
			damageMeleeCriticGroundB.innerHTML = Math.round(parseInt(damageMeleeNormalGroundB.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
			damageMeleeNormalAirborneM.innerHTML = calculationDamage("airborne","melee","mobs",0);
			damageMeleeCriticAirborneM.innerHTML = Math.round(parseInt(damageMeleeNormalAirborneM.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
			damageMeleeNormalAirborneB.innerHTML = calculationDamage("airborne","melee","boss",0);
			damageMeleeCriticAirborneB.innerHTML = Math.round(parseInt(damageMeleeNormalAirborneB.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
			damageRangeNormalGroundM.innerHTML = calculationDamage("ground","range","mobs",0);
			damageRangeCriticGroundM.innerHTML = Math.round(parseInt(damageRangeNormalGroundM.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
			damageRangeNormalGroundB.innerHTML = calculationDamage("ground","range","boss",0);
			damageRangeCriticGroundB.innerHTML = Math.round(parseInt(damageRangeNormalGroundB.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
			damageRangeNormalAirborneM.innerHTML = calculationDamage("airborne","range","mobs",0);
			damageRangeCriticAirborneM.innerHTML = Math.round(parseInt(damageRangeNormalAirborneM.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
			damageRangeNormalAirborneB.innerHTML = calculationDamage("airborne","range","boss",0);
			damageRangeCriticAirborneB.innerHTML = Math.round(parseInt(damageRangeNormalAirborneB.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
		}else{
			damageMeleeNormalGroundM.innerHTML = calculationDamage("ground","melee","mobs",5);
			damageMeleeCriticGroundM.innerHTML = Math.round(parseInt(damageMeleeNormalGroundM.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
			damageMeleeNormalGroundB.innerHTML = calculationDamage("ground","melee","boss",5);
			damageMeleeCriticGroundB.innerHTML = Math.round(parseInt(damageMeleeNormalGroundB.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
			damageMeleeNormalAirborneM.innerHTML = calculationDamage("airborne","melee","mobs",5);
			damageMeleeCriticAirborneM.innerHTML = Math.round(parseInt(damageMeleeNormalAirborneM.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
			damageMeleeNormalAirborneB.innerHTML = calculationDamage("airborne","melee","boss",5);
			damageMeleeCriticAirborneB.innerHTML = Math.round(parseInt(damageMeleeNormalAirborneB.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
			damageRangeNormalGroundM.innerHTML = calculationDamage("ground","range","mobs",5);
			damageRangeCriticGroundM.innerHTML = Math.round(parseInt(damageRangeNormalGroundM.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
			damageRangeNormalGroundB.innerHTML = calculationDamage("ground","range","boss",5);
			damageRangeCriticGroundB.innerHTML = Math.round(parseInt(damageRangeNormalGroundB.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
			damageRangeNormalAirborneM.innerHTML = calculationDamage("airborne","range","mobs",5);
			damageRangeCriticAirborneM.innerHTML = Math.round(parseInt(damageRangeNormalAirborneM.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
			damageRangeNormalAirborneB.innerHTML = calculationDamage("airborne","range","boss",5);
			damageRangeCriticAirborneB.innerHTML = Math.round(parseInt(damageRangeNormalAirborneB.innerHTML) * (parseFloat("{{ crit_dmg }}")/100))
		}
	}
</script>
<script>
	var powerRunesLines = ['','Attack (Power)','Attack% (Power)', 'Damage To Airborne Units', 'Damage To Airborne Units%', 'Damage To Ground Units', 'Damage To Ground Units%', 'Damage To Melee Units', 'Damage To Melee Units%', 'Damage To Ranged Units', 'Damage To Ranged Units%', 'Damage To Bosses', 'Damage To Bosses%', 'Damage To Mobs', 'Damage To Mobs%', 'All Damage Increased%', 'Attack Speed', 'Crit Chance', 'Crit Damage', 'Level-Up to increase Damage in Battle']
	var firstLinePower = 'Attack (Power)'
	var courageRunesLines = ['','Attack (Courage)','Attack% (Courage)','Current Hero base ATK','Current Hero base ATK %','Current Hero base HP','Current Hero base HP %','other ...']
	var firstLineCourage = 'Attack (Courage)'

	function runesClicked(runesType) {
		var allSelect = document.getElementsByClassName('runes-line')
		var runesLine = Object.values(allSelect)
		var firstSelect = document.getElementById('firstSelect')
		if(runesType === "power"){
			runesLine.forEach(select => {
				while (select.hasChildNodes()) {
					select.removeChild(select.firstChild);
				}
				if(select.childElementCount-1 === powerRunesLines.length ){
					return
				}else{
					powerRunesLines.forEach(e => {
						var newOption = document.createElement('option');
						newOption.innerHTML = e
						newOption.setAttribute("value",e)
						select.appendChild(newOption)
					});
				}
			});
			firstSelect.value = firstLinePower
		} else if(runesType === "courage"){
			runesLine.forEach(select => {
				while (select.hasChildNodes()) {
					select.removeChild(select.firstChild);
				}
				if(select.childElementCount-1 === powerRunesLines.length){
					return
				}else{
					courageRunesLines.forEach(e => {
						var newOption = document.createElement('option');
						newOption.innerHTML = e
						newOption.setAttribute("value",e)
						select.appendChild(newOption)
					});
				}
			});
			firstSelect.value = firstLineCourage
		}
	}
</script>
</html>